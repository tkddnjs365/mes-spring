<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mes.mes_boot.system.auth.User.mapper.UserMapper">
    <select id="userLogin" resultType="com.mes.mes_boot.system.auth.User.dto.UserDto">
        SELECT id,
               company_idx,
               user_id,
               name,
               role,
               JSON_EXTRACT(permissions, '$') AS permissions,
               is_approved,
               created_at,
               updated_at
        FROM users
        WHERE user_id = #{userId}
          AND password = SHA2(#{password}, 256)
    </select>
</mapper>